{{- $contract := . -}}
{{- range $i, $method := .NonConstMethods }}

// Transaction submission.
func ({{$contract.ShortVar}} *{{$contract.Class}}) {{$method.CapsName}}(
	{{$method.ParamDeclarations -}}
	{{- if $method.Payable -}}
	value *big.Int,
	{{ end -}}
) (*types.Transaction, error) {
	{{$contract.ShortVar}}.transactionMutex.Lock()
	defer {{$contract.ShortVar}}.transactionMutex.Unlock()

	{{if $method.Payable -}}
	transactorOptions := &(*{{$contract.ShortVar}}.transactorOptions) // create a copy
	transactorOptions.Value = value
	{{- else -}}
	transactorOptions := {{$contract.ShortVar}}.transactorOptions
	{{- end }}

	transaction, err := {{$contract.ShortVar}}.contract.{{$method.CapsName}}(
		transactorOptions,
		{{$method.Params}}
	)

	if err != nil {
		return transaction, {{$contract.ShortVar}}.errorResolver.ResolveError(
			err,
			{{$contract.ShortVar}}.transactorOptions.From,
			nil,
			"{{$method.LowerName}}",
			{{$method.Params}}
		)
	}

	return transaction, err
}

{{- end -}}
